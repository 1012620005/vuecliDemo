{"remainingRequest":"/Users/songshaohong/Desktop/vuecli/vuecliDemo/todoList-vuex/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/songshaohong/Desktop/vuecli/vuecliDemo/todoList-vuex/src/App.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"/Users/songshaohong/Desktop/vuecli/vuecliDemo/todoList-vuex/src/App.vue","mtime":1605772965292},{"path":"/Users/songshaohong/Desktop/vuecli/vuecliDemo/todoList-vuex/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/songshaohong/Desktop/vuecli/vuecliDemo/todoList-vuex/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/songshaohong/Desktop/vuecli/vuecliDemo/todoList-vuex/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/songshaohong/Desktop/vuecli/vuecliDemo/todoList-vuex/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/songshaohong/Desktop/vuecli/vuecliDemo/todoList-vuex/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/songshaohong/Desktop/vuecli/vuecliDemo/todoList-vuex/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoudG9kby1jb250YWluZXIgewogICAgICAgIHdpZHRoOiA2MDBweDsKICAgICAgICBtYXJnaW46IDAgYXV0bzsKICAgIH0KCiAgICAudG9kby1jb250YWluZXIgLnRvZG8td3JhcCB7CiAgICAgICAgcGFkZGluZzogMTBweDsKICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkOwogICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDsKICAgIH0K"},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsFA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n   <div class=\"todo-container\">\n        <div class=\"todo-wrap\">\n            <Header ref=\"header\"/><!--自定义事件传值 适合子传父组件-->\n            <List :todos=\"todos\"/><!--pubsub-js 消息订阅-->\n            <Footer>\n              <input type=\"checkbox\" v-model=\"isCheck\"  slot=\"isCheck\"/>\n              <span slot=\"finished\">\n                  <span>已完成{{finishedCount}}件</span> / 总计{{todos.length}}件\n              </span>\n              <button class=\"btn btn-warning\"  @click=\"delFinishedTodos\" slot=\"delFinishedTodos\">清除已完成任务</button>\n            </Footer> <!--solt实名插槽-->\n        </div>\n    </div>\n</template>\n\n<script>\nimport Header from './components/header'\nimport List from './components/list'\nimport Footer from './components/footer'\nimport locastorageuntil from './untils/locastorageuntil'\nimport PubSub from 'pubsub-js' \nexport default {\n  name: 'App',\n  components: {\n    Header,\n    List,\n    Footer\n  },\n  data () {\n    return {\n      todos: locastorageuntil.readTodos()\n    }\n  },\n  mounted (){\n    // 在组件加载完后获取ref对象的 $on 来回传addTitle\n    this.$refs.header.$on('addTitle',(todo) =>{\n      this.todos.unshift(todo)\n    })\n    // 在app中订阅\n    PubSub.subscribe('DELLIST',(msg,index) =>{\n      console.log(msg,index)\n      this.delList(index)\n    })\n  },\n  methods:{\n    delList (index) {\n      this.todos.splice(index,1)\n    },\n    selectAllTodos(flag){\n      this.todos.forEach(todo =>{\n        todo.finished = flag\n      })\n    },\n    delFinishedTodos(){\n      this.todos = this.todos.filter(todo=>!todo.finished)\n    }\n  },\n  watch:{\n    // 深度监视 便于存储\n      todos: {\n        handler: locastorageuntil.saveTodos,\n        deep: true, // 深度监视\n        // immediate: true // 初始化时调用hangdler函数\n      }\n  },\n  computed: {\n    finishedCount(){\n      console.log(this.todos)\n      return this.todos.reduce((total,todo) => total + (todo.finished ? 1:0),0)\n                \n    },\n    isCheck:{\n      get(){\n        return this.finishedCount === this.todos.length && this.todos.length > 0\n                   \n      },\n      set(value){\n        this.selectAllTodos(value)\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.todo-container {\n        width: 600px;\n        margin: 0 auto;\n    }\n\n    .todo-container .todo-wrap {\n        padding: 10px;\n        border: 1px solid #ddd;\n        border-radius: 5px;\n    }\n</style>\n"]}]}