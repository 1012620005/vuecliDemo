{"remainingRequest":"/Users/songshaohong/Desktop/vuecli/vuecliDemo/todoList-vuex/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/songshaohong/Desktop/vuecli/vuecliDemo/todoList-vuex/src/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/songshaohong/Desktop/vuecli/vuecliDemo/todoList-vuex/src/App.vue","mtime":1605772965292},{"path":"/Users/songshaohong/Desktop/vuecli/vuecliDemo/todoList-vuex/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/songshaohong/Desktop/vuecli/vuecliDemo/todoList-vuex/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/songshaohong/Desktop/vuecli/vuecliDemo/todoList-vuex/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/songshaohong/Desktop/vuecli/vuecliDemo/todoList-vuex/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBIZWFkZXIgZnJvbSAnLi9jb21wb25lbnRzL2hlYWRlcicKaW1wb3J0IExpc3QgZnJvbSAnLi9jb21wb25lbnRzL2xpc3QnCmltcG9ydCBGb290ZXIgZnJvbSAnLi9jb21wb25lbnRzL2Zvb3RlcicKaW1wb3J0IGxvY2FzdG9yYWdldW50aWwgZnJvbSAnLi91bnRpbHMvbG9jYXN0b3JhZ2V1bnRpbCcKaW1wb3J0IFB1YlN1YiBmcm9tICdwdWJzdWItanMnIApleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0FwcCcsCiAgY29tcG9uZW50czogewogICAgSGVhZGVyLAogICAgTGlzdCwKICAgIEZvb3RlcgogIH0sCiAgZGF0YSAoKSB7CiAgICByZXR1cm4gewogICAgICB0b2RvczogbG9jYXN0b3JhZ2V1bnRpbC5yZWFkVG9kb3MoKQogICAgfQogIH0sCiAgbW91bnRlZCAoKXsKICAgIC8vIOWcqOe7hOS7tuWKoOi9veWujOWQjuiOt+WPlnJlZuWvueixoeeahCAkb24g5p2l5Zue5LygYWRkVGl0bGUKICAgIHRoaXMuJHJlZnMuaGVhZGVyLiRvbignYWRkVGl0bGUnLCh0b2RvKSA9PnsKICAgICAgdGhpcy50b2Rvcy51bnNoaWZ0KHRvZG8pCiAgICB9KQogICAgLy8g5ZyoYXBw5Lit6K6i6ZiFCiAgICBQdWJTdWIuc3Vic2NyaWJlKCdERUxMSVNUJywobXNnLGluZGV4KSA9PnsKICAgICAgY29uc29sZS5sb2cobXNnLGluZGV4KQogICAgICB0aGlzLmRlbExpc3QoaW5kZXgpCiAgICB9KQogIH0sCiAgbWV0aG9kczp7CiAgICBkZWxMaXN0IChpbmRleCkgewogICAgICB0aGlzLnRvZG9zLnNwbGljZShpbmRleCwxKQogICAgfSwKICAgIHNlbGVjdEFsbFRvZG9zKGZsYWcpewogICAgICB0aGlzLnRvZG9zLmZvckVhY2godG9kbyA9PnsKICAgICAgICB0b2RvLmZpbmlzaGVkID0gZmxhZwogICAgICB9KQogICAgfSwKICAgIGRlbEZpbmlzaGVkVG9kb3MoKXsKICAgICAgdGhpcy50b2RvcyA9IHRoaXMudG9kb3MuZmlsdGVyKHRvZG89PiF0b2RvLmZpbmlzaGVkKQogICAgfQogIH0sCiAgd2F0Y2g6ewogICAgLy8g5rex5bqm55uR6KeGIOS+v+S6juWtmOWCqAogICAgICB0b2RvczogewogICAgICAgIGhhbmRsZXI6IGxvY2FzdG9yYWdldW50aWwuc2F2ZVRvZG9zLAogICAgICAgIGRlZXA6IHRydWUsIC8vIOa3seW6puebkeinhgogICAgICAgIC8vIGltbWVkaWF0ZTogdHJ1ZSAvLyDliJ3lp4vljJbml7bosIPnlKhoYW5nZGxlcuWHveaVsAogICAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgZmluaXNoZWRDb3VudCgpewogICAgICBjb25zb2xlLmxvZyh0aGlzLnRvZG9zKQogICAgICByZXR1cm4gdGhpcy50b2Rvcy5yZWR1Y2UoKHRvdGFsLHRvZG8pID0+IHRvdGFsICsgKHRvZG8uZmluaXNoZWQgPyAxOjApLDApCiAgICAgICAgICAgICAgICAKICAgIH0sCiAgICBpc0NoZWNrOnsKICAgICAgZ2V0KCl7CiAgICAgICAgcmV0dXJuIHRoaXMuZmluaXNoZWRDb3VudCA9PT0gdGhpcy50b2Rvcy5sZW5ndGggJiYgdGhpcy50b2Rvcy5sZW5ndGggPiAwCiAgICAgICAgICAgICAgICAgICAKICAgICAgfSwKICAgICAgc2V0KHZhbHVlKXsKICAgICAgICB0aGlzLnNlbGVjdEFsbFRvZG9zKHZhbHVlKQogICAgICB9CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAiBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n   <div class=\"todo-container\">\n        <div class=\"todo-wrap\">\n            <Header ref=\"header\"/><!--自定义事件传值 适合子传父组件-->\n            <List :todos=\"todos\"/><!--pubsub-js 消息订阅-->\n            <Footer>\n              <input type=\"checkbox\" v-model=\"isCheck\"  slot=\"isCheck\"/>\n              <span slot=\"finished\">\n                  <span>已完成{{finishedCount}}件</span> / 总计{{todos.length}}件\n              </span>\n              <button class=\"btn btn-warning\"  @click=\"delFinishedTodos\" slot=\"delFinishedTodos\">清除已完成任务</button>\n            </Footer> <!--solt实名插槽-->\n        </div>\n    </div>\n</template>\n\n<script>\nimport Header from './components/header'\nimport List from './components/list'\nimport Footer from './components/footer'\nimport locastorageuntil from './untils/locastorageuntil'\nimport PubSub from 'pubsub-js' \nexport default {\n  name: 'App',\n  components: {\n    Header,\n    List,\n    Footer\n  },\n  data () {\n    return {\n      todos: locastorageuntil.readTodos()\n    }\n  },\n  mounted (){\n    // 在组件加载完后获取ref对象的 $on 来回传addTitle\n    this.$refs.header.$on('addTitle',(todo) =>{\n      this.todos.unshift(todo)\n    })\n    // 在app中订阅\n    PubSub.subscribe('DELLIST',(msg,index) =>{\n      console.log(msg,index)\n      this.delList(index)\n    })\n  },\n  methods:{\n    delList (index) {\n      this.todos.splice(index,1)\n    },\n    selectAllTodos(flag){\n      this.todos.forEach(todo =>{\n        todo.finished = flag\n      })\n    },\n    delFinishedTodos(){\n      this.todos = this.todos.filter(todo=>!todo.finished)\n    }\n  },\n  watch:{\n    // 深度监视 便于存储\n      todos: {\n        handler: locastorageuntil.saveTodos,\n        deep: true, // 深度监视\n        // immediate: true // 初始化时调用hangdler函数\n      }\n  },\n  computed: {\n    finishedCount(){\n      console.log(this.todos)\n      return this.todos.reduce((total,todo) => total + (todo.finished ? 1:0),0)\n                \n    },\n    isCheck:{\n      get(){\n        return this.finishedCount === this.todos.length && this.todos.length > 0\n                   \n      },\n      set(value){\n        this.selectAllTodos(value)\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.todo-container {\n        width: 600px;\n        margin: 0 auto;\n    }\n\n    .todo-container .todo-wrap {\n        padding: 10px;\n        border: 1px solid #ddd;\n        border-radius: 5px;\n    }\n</style>\n"]}]}